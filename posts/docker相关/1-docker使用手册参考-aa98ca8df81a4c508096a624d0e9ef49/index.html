<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        :root {
            --accent-color: #FF4D4D;
        }
    </style>

    
    
    
    
    
    

    
    <title>docker 相关手册</title>
    <meta name="description" content="Docker使用手册参考">
    <meta name="keywords" content='blog, gokarna, hugo, docker相关'>

    <meta property="og:url" content="https://nicetomeetuuu.github.io/posts/docker%E7%9B%B8%E5%85%B3/1-docker%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C%E5%8F%82%E8%80%83-aa98ca8df81a4c508096a624d0e9ef49/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="docker 相关手册">
    <meta property="og:description" content="Docker使用手册参考">
    <meta property="og:image" content="https://nicetomeetuuu.github.io/pictures/xinzhizhu.jpg">
    <meta property="og:image:secure_url" content="https://nicetomeetuuu.github.io/pictures/xinzhizhu.jpg">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="docker 相关手册">
    <meta name="twitter:description" content="Docker使用手册参考">
    <meta property="twitter:domain" content="https://nicetomeetuuu.github.io/posts/docker%E7%9B%B8%E5%85%B3/1-docker%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C%E5%8F%82%E8%80%83-aa98ca8df81a4c508096a624d0e9ef49/">
    <meta property="twitter:url" content="https://nicetomeetuuu.github.io/posts/docker%E7%9B%B8%E5%85%B3/1-docker%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C%E5%8F%82%E8%80%83-aa98ca8df81a4c508096a624d0e9ef49/">
    <meta name="twitter:image" content="https://nicetomeetuuu.github.io/pictures/xinzhizhu.jpg">

    
    <link rel="canonical" href="https://nicetomeetuuu.github.io/posts/docker%E7%9B%B8%E5%85%B3/1-docker%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C%E5%8F%82%E8%80%83-aa98ca8df81a4c508096a624d0e9ef49/" />

    
    <link rel="stylesheet" type="text/css" href="/css/normalize.min.css" media="print">

    
    <link rel="stylesheet" type="text/css" href="/css/main.min.css">

    
    <link id="dark-theme" rel="stylesheet" href="/css/dark.min.css">

    
    <script src="/js/bundle.min.02dacf7714c2645136fbf75dd7d16fbc0b7d770133dac770c160e51a50724022.js" integrity="sha256-AtrPdxTCZFE2&#43;/dd19FvvAt9dwEz2sdwwWDlGlByQCI="></script>

    
    
</head>
<body>
        <script type="text/javascript">
            
            setThemeByUserPref();
        </script><header class="header">
    <nav class="header-nav">

        
        <div class="avatar">
            <a href="https://nicetomeetuuu.github.io/">
                <img src='/pictures/xinzhizhu.jpg' alt="avatar" />
            </a>
        </div>
        

        <div class="nav-title">
            <a class="nav-brand" href="https://nicetomeetuuu.github.io/">QJJ-笔记</a>
        </div>

        <div class="nav-links">
            
            <div class="nav-link">
                <a href="https://nicetomeetuuu.github.io/posts/"> 笔记 </a>
            </div>
            
            <div class="nav-link">
                <a href="https://nicetomeetuuu.github.io/tags/"> 标签 </a>
            </div>
            
            <div class="nav-link">
                <a href="https://github.com"><span data-feather='github'></span>  </a>
            </div>
            

            <span class="nav-icons-divider"></span>
            <div class="nav-link dark-theme-toggle">
                <span id="dark-theme-toggle-screen-reader-target" class="sr-only"></span>
                <a>
                    <span id="theme-toggle-icon" data-feather="moon"></span>
                </a>
            </div>

            <div class="nav-link" id="hamburger-menu-toggle">
                <span id="hamburger-menu-toggle-screen-reader-target" class="sr-only">menu</span>
                <a>
                    <span data-feather="menu"></span>
                </a>
            </div>

            
            <ul class="nav-hamburger-list visibility-hidden">
                
                <li class="nav-item">
                    <a href="https://nicetomeetuuu.github.io/posts/"> 笔记 </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://nicetomeetuuu.github.io/tags/"> 标签 </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://github.com"><span data-feather='github'></span>  </a>
                </li>
                
                <li class="nav-item dark-theme-toggle">
                    <span id="dark-theme-toggle-screen-reader-target" class="sr-only">theme</span>
                    <a>
                        <span id="theme-toggle-icon" data-feather="moon"></span>
                    </a>
                </li>
            </ul>

        </div>
    </nav>
</header>
<main id="content">
    <div class="post container">
    <div class="post-header-section">
        <h1>docker 相关手册</h1>
        <small role="doc-subtitle">Docker使用手册参考</small>
        <p class="post-date">2023年9月2日
        
        </p>

        <ul class="post-tags">
        
            <li class="post-tag"><a href="https://nicetomeetuuu.github.io/tags/docker%E7%9B%B8%E5%85%B3">docker相关</a></li>
        
        </ul>
    </div>

    <div class="post-content">
        <p>
            <h1 id="1-docker使用手册参考">1. Docker使用手册参考</h1>
<h3 id="11-镜像相关">1.1 镜像相关：</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#拉取到本地</span>
</span></span><span style="display:flex;"><span>docker pull <span style="color:#f92672">[</span>选项<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>Docker Registry 地址<span style="color:#f92672">[</span>:端口号<span style="color:#f92672">]</span>/<span style="color:#f92672">]</span>仓库名<span style="color:#f92672">[</span>:标签<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#启动镜像创建容器、it表示交互式终端操作，rm为关闭后移除容器（测试效果时推荐使用）</span>
</span></span><span style="display:flex;"><span>docker run -it --rm ubuntu:18.04 bash
</span></span><span style="display:flex;"><span><span style="color:#75715e">#启动镜像指定容器名与宿主端口映射</span>
</span></span><span style="display:flex;"><span>docker run --name webserver -d -p 80:80 nginx
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#列出本地镜像</span>
</span></span><span style="display:flex;"><span>docker images
</span></span><span style="display:flex;"><span>docker image ls <span style="color:#75715e">#后接名字可以指定列出的镜像</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#查看镜像体积</span>
</span></span><span style="display:flex;"><span>docker system df
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#删除较老的本地镜像</span>
</span></span><span style="display:flex;"><span>docker image prune
</span></span><span style="display:flex;"><span>docker image rm <span style="color:#75715e">#镜像名centos</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#将容器保存为新的镜像</span>
</span></span><span style="display:flex;"><span>docker commit <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --author <span style="color:#e6db74">&#34;Tao Wang &lt;twang2218@gmail.com&gt;&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --message <span style="color:#e6db74">&#34;修改了默认网页&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    webserver <span style="color:#ae81ff">\ </span>                                  <span style="color:#75715e">#容器名</span>
</span></span><span style="display:flex;"><span>    nginx:v2                                      <span style="color:#75715e">#新镜像名称</span>
</span></span></code></pre></div><h3 id="12-容器相关">1.2 容器相关：</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#进入容器（exit后不销毁容器）</span>
</span></span><span style="display:flex;"><span>docker exec -it container_id bash
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#挂载主机目录到docker容器内</span>
</span></span><span style="display:flex;"><span>docker -v /host/dir:/target/dir image_name
</span></span><span style="display:flex;"><span><span style="color:#75715e">#挂载多目录到container内，可以多次调用-v</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#一键删除多个已经停止的容器</span>
</span></span><span style="display:flex;"><span>docker container prune
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#一次尝试</span>
</span></span><span style="display:flex;"><span>xhost local:root
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>XAUTH<span style="color:#f92672">=</span>/tmp/.docker.xauth
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker run -it <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--gpus all --name movo_env --net<span style="color:#f92672">=</span>host <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--env<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;DISPLAY=</span>$DISPLAY<span style="color:#e6db74">&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--env<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;QT_X11_NO_MITSHM=1&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--volume<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/tmp/.X11-unix:/tmp/.X11-unix:rw&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--env<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;XAUTHORITY=</span>$XAUTH<span style="color:#e6db74">&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--volume<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$XAUTH<span style="color:#e6db74">:</span>$XAUTH<span style="color:#e6db74">&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--privileged <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-v /home/qjj/Uploadto14.04:/root <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>9fb09c800fbd /bin/bash
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 成功把本地目录挂载到container中，但是gazebo找不到Xserver 没办法可视化</span>
</span></span><span style="display:flex;"><span>docker run -it <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--gpus all --name movo_env <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--env<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;DISPLAY&#34;</span> --net<span style="color:#f92672">=</span>host <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--volume<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$HOME<span style="color:#e6db74">/.Xauthority:/root/.Xauthority:rw&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--env<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;QT_X11_NO_MITSHM=1&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-v /tmp/.X11-unix:/tmp/.X11-unix:ro <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--privileged <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-v /home/qjj/Uploadto14.04:/root <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>c6ece4af5581 /bin/bash
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker run -it <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--gpus all --name movo_env --net<span style="color:#f92672">=</span>host <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--env<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;DISPLAY=</span>$DISPLAY<span style="color:#e6db74">&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--volume<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/tmp/.X11-unix:/tmp/.X11-unix:rw&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--privileged <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-v /home/qjj/Uploadto14.04:/root <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>c6ece4af5581 /bin/bash
</span></span><span style="display:flex;"><span>//ICRA2023 manipulator test
</span></span><span style="display:flex;"><span>docker run -it <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--gpus all --name icratest --net<span style="color:#f92672">=</span>host <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--env<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;DISPLAY=</span>$DISPLAY<span style="color:#e6db74">&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--volume<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/tmp/.X11-unix:/tmp/.X11-unix:rw&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--privileged <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>d3d4db6c355a /bin/bash
</span></span></code></pre></div><p>使用容器懒得搞vpn了，修改/etc/apt/sources.list内容，指定中科大源为软件源：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>apt-get update
</span></span><span style="display:flex;"><span>apt-get install vim
</span></span><span style="display:flex;"><span>cp /etc/apt/sources.list /etc/apt/sources.list.bak <span style="color:#75715e">#备份一下，万一以后用呢</span>
</span></span><span style="display:flex;"><span>vim /etc/apt/sources.list
</span></span><span style="display:flex;"><span><span style="color:#75715e">#修改内容如下</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 默认注释了源码仓库，如有需要可自行取消注释</span>
</span></span><span style="display:flex;"><span>deb https://mirrors.ustc.edu.cn/ubuntu/ trusty main restricted universe multiverse
</span></span><span style="display:flex;"><span><span style="color:#75715e"># deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy main restricted universe multiverse</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>deb https://mirrors.ustc.edu.cn/ubuntu/ trusty-security main restricted universe multiverse
</span></span><span style="display:flex;"><span><span style="color:#75715e"># deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy-security main restricted universe multiverse</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>deb https://mirrors.ustc.edu.cn/ubuntu/ trusty-updates main restricted universe multiverse
</span></span><span style="display:flex;"><span><span style="color:#75715e"># deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>deb https://mirrors.ustc.edu.cn/ubuntu/ trusty-backports main restricted universe multiverse
</span></span><span style="display:flex;"><span><span style="color:#75715e"># deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 预发布软件源，不建议启用</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># deb https://mirrors.ustc.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse</span>
</span></span><span style="display:flex;"><span>:wq
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#报错</span>
</span></span><span style="display:flex;"><span>Is the package apt-transport-https installed
</span></span><span style="display:flex;"><span><span style="color:#75715e">#解决办法：</span>
</span></span><span style="display:flex;"><span>cd /usr/lib/apt/methods
</span></span><span style="display:flex;"><span>ln -s http https
</span></span></code></pre></div><h3 id="13-docker-container内部使用宿主机器的vpn转发">1.3 Docker Container内部使用宿主机器的vpn转发</h3>
<p><a href="wsl2%20%E8%B5%B0%E5%AE%BF%E4%B8%BB%E6%9C%BA%E4%BB%A3%E7%90%86%E8%AE%BE%E7%BD%AE%20703ad7ccf2d048dbadb125dd91a9d192.md">wsl2 走宿主机代理设置</a></p>

        </p>
        
    </div>

    <div class="prev-next">
        
    </div>

    
    
    <svg id="btt-button" class="arrow-logo" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 384 512" onclick="topFunction()" title="Go to top">
        
        <path d="M177 159.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 329.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"/>
    </svg>
    <script>
        let backToTopButton = document.getElementById("btt-button");

        window.onscroll = function() {
            scrollFunction()
        };

        function scrollFunction() {
            if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                backToTopButton.style.display = "block";
            } else {
                backToTopButton.style.display = "none";
            }
        }

        function topFunction() {
            smoothScrollToTop();
        }

        function smoothScrollToTop() {
            const scrollToTop = () => {
                const c = document.documentElement.scrollTop || document.body.scrollTop;
                if (c > 0) {
                    window.requestAnimationFrame(scrollToTop);
                    window.scrollTo(0, c - c / 8);
                }
            };
            scrollToTop();
        }
    </script>
    
    
</div>



    

        </main><footer class="footer">
    
    

    
    <span>&copy; 2024 一只正在学技术的菜鸟</span>
    
    <span>
        Made with &#10084;&#65039; using <a target="_blank" href="https://github.com/526avijitgupta/gokarna">Gokarna</a>
    </span>
</footer>
</body>
</html>

---
title: "Robotiq140——ros功能包实机调试"
date: 2023-07-09
description: "Robotiq140——ros功能包实机调试"
type: "post"
tags: ["blog","ros相关"]
---

# Robotiq140——ros功能包实机调试

Person: COO Ni

## 1. 获取kinect版本的robotiq功能包，本地编译通过，记得安装joint_state_publisher_gui；

## 2. 使用usb联通设备开始调试：

- 需要为usb修改配置串口，首先查看Robotiq设备在系统中串口显示；
- 默认会显示为  ttyUSB0 串口，针对此串口修改即可：
- 参考的ros官网教程：[http://wiki.ros.org/robotiq/Tutorials/Control of a 2-Finger Gripper using the Modbus RTU protocol (ros kinetic and newer releases)](http://wiki.ros.org/robotiq/Tutorials/Control%20of%20a%202-Finger%20Gripper%20using%20the%20Modbus%20RTU%20protocol%20%28ros%20kinetic%20and%20newer%20releases%29)

![Untitled](Robotiq140%E2%80%94%E2%80%94ros%E5%8A%9F%E8%83%BD%E5%8C%85%E5%AE%9E%E6%9C%BA%E8%B0%83%E8%AF%95%20a2837118a57b4030a6a897684ac318a2/Untitled.png)

- 需要给串口读写操作，建议将设备用户添加到dialout group，确保永久读写权限

```bash
sudo usermod -a -G dialout $username
sudo usermod -a -G dialout the_computer_user_name
#查看连接的串口
dmesg | grep tty

#输出如下
[    0.004000] console [tty0] enabled
[    1.781526] 00:05: ttyS0 at I/O 0x3f8 (irq = 4, base_baud = 115200) is a 16550A
[421151.583450] usb 3-2: FTDI USB Serial Device converter now attached to ttyUSB0
[434351.168238] ftdi_sio ttyUSB0: FTDI USB Serial Device converter now disconnected from ttyUSB0
[434355.617853] usb 3-2: FTDI USB Serial Device converter now attached to ttyUSB0
[434373.072870] ftdi_sio ttyUSB0: FTDI USB Serial Device converter now disconnected from ttyUSB0
[434452.482350] usb 3-2: FTDI USB Serial Device converter now attached to ttyUSB0
```

- 可以看到ttyUSB0已经在通信串口中显示了，接下来启动RTU协议下的robotiq通信脚本：

```bash
rosrun robotiq_2f_gripper_control Robotiq2FGripperRtuNode.py /dev/ttyUSB0
#报错缺少pymod_bus 依赖包
No module named pymodbus.client.sync
#看了一下是在python2.7环境下运行，通过pip 安装依赖包
#安装pymodbus依赖解决问题
sudo python -m pip install pymodbus
#会遇到pyserial版本问题，我选择--no-dependencies直接略过，看看后续问题
```

[https://github.com/ros-industrial/robotiq/issues/121](https://github.com/ros-industrial/robotiq/issues/121)

[https://github.com/ros-industrial/robotiq/issues/45](https://github.com/ros-industrial/robotiq/issues/45)

- 在上述问题解决方案中折中，通过：
    
    ```bash
    [ 6416.940532] usb 1-2: FTDI USB Serial Device converter now attached to ttyUSB0
    ```
    
    找到了ttyUSB0是虚拟机下robotiq串行通信，给这个串口提供权限
    
    ```bash
    sudo chmod + 777 /dev/ttyUSB0
    #接下来运行roscore、RtuNode，然后运行：
    rosrun robotiq_2f_gripper_control Robotiq2FGripperSimpleController.py
    #通过键盘操控成功与设备通信；
    ```
    

## 官方给出的包内部没有 rviz仿真运动规划，可以使用如下包：

[https://github.com/Danfoa/robotiq_2finger_grippers.git](https://github.com/Danfoa/robotiq_2finger_grippers.git)

### 问题解决！